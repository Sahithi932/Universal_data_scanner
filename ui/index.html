<!DOCTYPE html>
<html>
<head>
    <title>ğŸ“ Local Data Scanner</title>
    <link rel="stylesheet" href="styles.css?v=2">
</head>
<body>
    <div class="header">
        <h1> Universal Data Scanner</h1>
        <p>Scan and analyze files in your local folders</p>
    </div>
    
    <div class="container">
        <!-- Scan Controls -->
        <div class="section">
            <h2>ğŸ” Start New Scan</h2>
            
            <!-- Storage Type Selection -->
            <div style="margin-bottom: 20px;">
                <label style="font-weight: bold; margin-right: 20px;">
                    <input type="radio" name="storageType" value="local" checked onchange="toggleStorageType()">
                    ğŸ“ Local Folder
                </label>
                <label style="font-weight: bold; margin-right: 20px;">
                    <input type="radio" name="storageType" value="azure" onchange="toggleStorageType()">
                    â˜ï¸ Azure Blob Storage
                </label>
                <label style="font-weight: bold;">
                    <input type="radio" name="storageType" value="shared" onchange="toggleStorageType()">
                    ğŸŒ Shared Directory
                </label>
            </div>
            
            <!-- Local Folder Inputs -->
            <div id="localInputs" class="scan-controls">
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" id="folderPath" placeholder="C:\Users\ADMIN\Documents (or use folder picker)" style="flex: 1;">
                    <button onclick="selectFolderFromBrowser()" style="background: #4CAF50; padding: 10px 20px; white-space: nowrap;">ğŸ“ Pick Folder</button>
                </div>
                <input type="text" id="scanName" placeholder="Scan Name (optional)">
                <div style="display: flex; gap: 10px;">
                    <button onclick="startLocalScan()" style="flex: 1;">Start Scanning</button>
                    <button onclick="stopLocalScan()" style="flex: 1; background: #ff6b6b;">Stop Scan</button>
                </div>
            </div>
            
            <!-- Azure Inputs -->
            <div id="azureInputs" style="display: none;">
                <div class="scan-controls" style="grid-template-columns: 1fr;">
                    <input type="text" id="connectionString" placeholder="Azure Storage Connection String" style="grid-column: 1/-1;">
                    <input type="text" id="containerName" placeholder="Container Name">
                    <input type="text" id="storageAccount" placeholder="Storage Account Name">
                    <input type="text" id="azureScanName" placeholder="Scan Name (optional)">
                </div>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="startAzureScan()" style="flex: 1;">Scan Azure Container</button>
                    <button onclick="stopAzureScan()" style="flex: 1; background: #ff6b6b;">Stop Scan</button>
                </div>
            </div>
            
            <!-- Shared Directory Inputs -->
            <div id="sharedInputs" style="display: none;">
                <div class="scan-controls" style="grid-template-columns: 1fr;">
                    <input type="text" id="sharePath" placeholder="UNC Path (e.g., \\192.168.1.100\Share or \\server\folder)" style="grid-column: 1/-1;">
                    <input type="text" id="shareName" placeholder="Share Name/Identifier">
                    <input type="text" id="sharedScanName" placeholder="Scan Name (optional)">
                </div>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="startSharedScan()" style="flex: 1;">Scan Shared Directory</button>
                    <button onclick="stopSharedScan()" style="flex: 1; background: #ff6b6b;">Stop Scan</button>
                </div>
            </div>
            
            <div id="scanMessage"></div>
        </div>
        <!-- Main Navigation Divisions -->
<div class="section" id="mainNav" style="display:none;">
    <div class="dashboard">
        <div class="stat-card" onclick="showMainSection('dashboard')" style="cursor:pointer;">
            <div class="stat-value">ğŸ“Š</div>
            <div class="stat-label">Dashboard</div>
        </div>

        <div class="stat-card" onclick="showMainSection('explorer')" style="cursor:pointer;">
            <div class="stat-value">ğŸ“‚</div>
            <div class="stat-label">File Explorer</div>
        </div>

        <div class="stat-card" onclick="showMainSection('history')" style="cursor:pointer;">
            <div class="stat-value">ğŸ“œ</div>
            <div class="stat-label">Scan History</div>
        </div>
        </div>
        </div>
        
        <!-- Scan Tabs -->
        <div class="section" id="tabsSection" style="display: none;">
            <div class="tabs" id="scanTabs">
                <!-- Tabs will be dynamically added here -->
            </div>
            <!-- Main Navigation Buttons -->
<div class="section" id="mainOptions" style="display: none;">
    <div class="main-nav">
        <button class="main-btn" onclick="showSection('dashboard')">ğŸ“Š Dashboard</button>
        <button class="main-btn" onclick="showSection('explorer')">ğŸ“‚ File Explorer</button>
        <button class="main-btn" onclick="showSection('history')">ğŸ“œ Scan History</button>
        </div>
        </div>
            <!-- Dashboard -->
            <div id="dashboardSection" style="display: none;">
                <h2>ğŸ“Š Dashboard</h2>
                <div class="dashboard">
                    <div class="stat-card">
                        <div class="stat-value" id="totalFiles">0</div>
                        <div class="stat-label">Total Files</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSize">0 B</div>
                        <div class="stat-label">Total Size</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="scanDuration">0s</div>
                        <div class="stat-label">Duration</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="ocrCount">0</div>
                        <div class="stat-label">OCR Eligible</div>
                    </div>
                </div>
                
                <h3 style="margin-top: 25px; margin-bottom: 15px; color: #667eea;">ğŸ“ˆ File Type Distribution</h3>
                <div class="distribution-grid" id="fileTypeDistribution"></div>
                
                <div class="export-buttons">
                    <button class="export-btn" onclick="exportJSON()">ğŸ“¥ Export JSON</button>
                    <button class="export-btn csv" onclick="exportCSV()">ğŸ“¥ Export CSV</button>
                </div>
            </div>
        </div>
        
        <!-- File Explorer -->
        <div class="section" id="explorerSection" style="display: none;">
            <h2>ğŸ“‚ File Explorer</h2>
            
            <h3 style="margin-bottom: 15px; color: #667eea;">ğŸ” Filters</h3>
            <div class="filters">
                <select id="filterType" onchange="applyFilters()">
                    <option value="">All File Types</option>
                    <option value="pdf">PDF</option>
                    <option value="image">Image</option>
                    <option value="office">Office</option>
                    <option value="text">Text</option>
                    <option value="code">Code</option>
                    <option value="archive">Archive</option>
                </select>
                <input type="number" id="minSize" placeholder="Min Size (KB)" onchange="applyFilters()">
                <input type="number" id="maxSize" placeholder="Max Size (MB)" onchange="applyFilters()">
                <input type="text" id="searchFile" placeholder="Search file name" onkeyup="applyFilters()">
            </div>
            
            <div class="file-list" id="fileList">
                <p style="padding: 20px; text-align: center; color: #999;">No files scanned yet</p>
            </div>
            
            <button id="loadMoreBtn" class="load-more-btn" onclick="loadMoreFiles()" style="display: none;">ğŸ“¥ Load More Files</button>
            
            <div class="pagination-info" id="paginationInfo" style="display: none;">
                Showing 0 files
            </div>
            
            <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                Showing <span id="fileCount">0</span> files
            </div>
        </div>
        
        <!-- Scan History -->
        <div class="section" id="historySection" style="display: none;">
            <h2>ğŸ“œ Scan History</h2>
            <div id="scanHistory" style="max-height: 400px; overflow-y: auto;">
                <p style="padding: 20px; text-align: center; color: #999;">No scans yet</p>
            </div>
        </div>
    </div>
    
    <!-- Load core business logic first -->
    <script src="app-core.js?v=10"></script>
    <!-- Then load UI/display functions -->
    <script src="app-ui.js?v=10"></script>
</body>
</html>
